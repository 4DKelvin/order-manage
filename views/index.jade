extends layout

block content
  form.am-g(action='/',method='get')
    .am-u-sm-12.am-u-md-3
      input.am-form-field(type='text', name='start', value=params.start, placeholder='起始日期时间', class='datetime-picker')
    .am-u-sm-12.am-u-md-3
      input.am-form-field(type='text', name='end',value=params.end, placeholder='结束日期时间', class='datetime-picker')
    .am-u-sm-12.am-u-md-2
      .am-input-group.am-input-group
        span.am-input-group-btn
          button.am-btn.am-btn-default(type='submit') 搜索
    .am-u-sm-12.am-u-md-4

  hr
  .am-g
    if !data.length
      .am-u-sm-12
        .am-alert.am-alert-success no orders found.
    else
      .am-u-sm-12.am-scrollable-horizontal
        table.am-table.am-table-bd.am-table-striped.admin-content-table.am-text-nowrap
          thead
            tr
              th ID
              th 金额
              th 航班
              th 乘客
              th 联系人
              th 管理
          tbody
            each item in data
              tr
                td
                  span #{item.id}
                  br
                  span #{item.createtime}
                td #{item.allprice}
                td
                  span #{item.flight['code']}
                  br
                  span #{item.flight['depday']}
                  br
                  span #{item.flight['deptime']}
                  span -
                  span #{item.flight['arrtime']}
                td
                  if item.passenger instanceof Array
                    each pgr in item.passenger
                      pan #{pgr['name']} &nbsp;
                      span #{pgr['gender']} &nbsp;
                      span #{pgr['cardnum']} &nbsp;
                      br
                  else
                    span #{item.passenger['name']} &nbsp;
                    span #{item.passenger['gender']} &nbsp;
                    span #{item.passenger['cardnum']} &nbsp;
                td
                  if item.contact
                    span #{item.contact}
                  else
                    span 无联系人信息
                  gbr

                  span #{item.contactmob}
                  br
                  span #{item.status}
                td
                  a(class="am-btn am-btn-xs am-btn-default am-btn-order",order=item.id,href='javascript:void(0);') 一键下单


